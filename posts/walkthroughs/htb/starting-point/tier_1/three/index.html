<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>HTB - Three - Walkthrough | Ee-Vah?</title><meta name=keywords content="htb,walkthrough,three,tier-1,web,cloud,custom-applications,aws,reconnaissance,web-site-structure-discovery,bucket-enumeration,arbitrary-file-upload,anonymous-access,guest-access"><meta name=description content="The aim of this walkthrough is to provide help with the Three machine on the Hack The Box website. Please note that no flags are directly provided here. Moreover, be aware that this is only one of the many ways to solve the challenges.
It belongs to a series of tutorials that aim to help out complete beginners with finishing the Starting Point TIER 1 challenges.
SETUP There are a couple of ways to connect to the target machine."><meta name=author content="bluewalle"><link rel=canonical href=https://bluewalle.github.io/posts/walkthroughs/htb/starting-point/tier_1/three/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.3613efbd0b1772781e8f49935e973cae632a7f61471c05b17be155505ccf87b5.css integrity="sha256-NhPvvQsXcngej0mTXpc8rmMqf2FHHAWxe+FVUFzPh7U=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://bluewalle.github.io/main/img/favicon.png><link rel=icon type=image/png sizes=16x16 href=https://bluewalle.github.io/main/img/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://bluewalle.github.io/main/img/favicon-32x32.png><link rel=apple-touch-icon href=https://bluewalle.github.io/main/img/apple-touch-icon.png><link rel=mask-icon href=https://bluewalle.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="HTB - Three - Walkthrough"><meta property="og:description" content="The aim of this walkthrough is to provide help with the Three machine on the Hack The Box website. Please note that no flags are directly provided here. Moreover, be aware that this is only one of the many ways to solve the challenges.
It belongs to a series of tutorials that aim to help out complete beginners with finishing the Starting Point TIER 1 challenges.
SETUP There are a couple of ways to connect to the target machine."><meta property="og:type" content="article"><meta property="og:url" content="https://bluewalle.github.io/posts/walkthroughs/htb/starting-point/tier_1/three/"><meta property="og:image" content="https://bluewalle.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-05-08T08:00:00+00:00"><meta property="article:modified_time" content="2023-05-08T08:00:00+00:00"><meta property="og:site_name" content="Just Keep Swimming"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://bluewalle.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="HTB - Three - Walkthrough"><meta name=twitter:description content="The aim of this walkthrough is to provide help with the Three machine on the Hack The Box website. Please note that no flags are directly provided here. Moreover, be aware that this is only one of the many ways to solve the challenges.
It belongs to a series of tutorials that aim to help out complete beginners with finishing the Starting Point TIER 1 challenges.
SETUP There are a couple of ways to connect to the target machine."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://bluewalle.github.io/posts/"},{"@type":"ListItem","position":2,"name":"HTB - Three - Walkthrough","item":"https://bluewalle.github.io/posts/walkthroughs/htb/starting-point/tier_1/three/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"HTB - Three - Walkthrough","name":"HTB - Three - Walkthrough","description":"The aim of this walkthrough is to provide help with the Three machine on the Hack The Box website. Please note that no flags are directly provided here. Moreover, be aware that this is only one of the many ways to solve the challenges.\nIt belongs to a series of tutorials that aim to help out complete beginners with finishing the Starting Point TIER 1 challenges.\nSETUP There are a couple of ways to connect to the target machine.","keywords":["htb","walkthrough","three","tier-1","web","cloud","custom-applications","aws","reconnaissance","web-site-structure-discovery","bucket-enumeration","arbitrary-file-upload","anonymous-access","guest-access"],"articleBody":"The aim of this walkthrough is to provide help with the Three machine on the Hack The Box website. Please note that no flags are directly provided here. Moreover, be aware that this is only one of the many ways to solve the challenges.\nIt belongs to a series of tutorials that aim to help out complete beginners with finishing the Starting Point TIER 1 challenges.\nSETUP There are a couple of ways to connect to the target machine. The one we will be using throughout this walkthrough is via the provided pwnbox.\nOnce our connection is taken care of, we spawn the target machine.\nAlso, not required, but it is possible to set an environmental variable containing our target host’s IP address. Once set, we can easily access it by prepending a $ to our variable name.\n┌─[htb-bluewalle@htb-pwdysfiide]─[~/Desktop] └──╼ $rhost= ┌─[htb-bluewalle@htb-pwdysfiide]─[~/Desktop] └──╼ $ echo $rhost ┌─[htb-bluewalle@htb-pwdysfiide]─[~/Desktop] └──╼ $ We could use the unset command to remove it after we no longer need it.\n┌─[✗]─[htb-bluewalle@htb-pwdysfiide]─[~/Desktop] └──╼ $unset rhost ┌─[htb-bluewalle@htb-pwdysfiide]─[~/Desktop] └──╼ $ TASK 1 Question: How many TCP ports are open?\nWe start our recon with a quick connection check by pinging the target four times.\n┌─[htb-bluewalle@htb-vwn6wdartu]─[~/three] └──╼ $ping $rhost -c 4 PING 10.129.165.111 (10.129.165.111) 56(84) bytes of data. 64 bytes from 10.129.165.111: icmp_seq=1 ttl=63 time=10.8 ms 64 bytes from 10.129.165.111: icmp_seq=2 ttl=63 time=10.7 ms 64 bytes from 10.129.165.111: icmp_seq=3 ttl=63 time=10.8 ms 64 bytes from 10.129.165.111: icmp_seq=4 ttl=63 time=11.0 ms --- 10.129.165.111 ping statistics --- 4 packets transmitted, 4 received, 0% packet loss, time 3006ms rtt min/avg/max/mdev = 10.704/10.801/10.965/0.098 ms ┌─[htb-bluewalle@htb-vwn6wdartu]─[~/three] └──╼ $ Once we made sure that we have a stable connection we continue our recon phase with an all-ports tcp scan.\n┌─[htb-bluewalle@htb-vwn6wdartu]─[~/three] └──╼ $nmap -p- --min-rate=5000 $rhost Starting Nmap 7.93 ( https://nmap.org ) at 2023-05-08 11:20 BST Nmap scan report for 10.129.165.111 Host is up (2.7s latency). Not shown: 63938 filtered tcp ports (no-response), 1595 closed tcp ports (conn-refused) PORT STATE SERVICE 22/tcp open ssh 80/tcp open http Nmap done: 1 IP address (1 host up) scanned in 353.83 seconds ┌─[htb-bluewalle@htb-vwn6wdartu]─[~/three] └──╼ $ It looks like we have a webpage to check out. It looks like a website belonging to a band. Nothing that jumps out right away so let us continue with dir busting.\n┌─[htb-bluewalle@htb-vwn6wdartu]─[~/three] └──╼ $gobuster dir -u http://$rhost/ -w /usr/share/wordlists/dirb/common.txt =============================================================== Gobuster v3.1.0 by OJ Reeves (@TheColonial) \u0026 Christian Mehlmauer (@firefart) =============================================================== [+] Url: http://10.129.165.111/ [+] Method: GET [+] Threads: 10 [+] Wordlist: /usr/share/wordlists/dirb/common.txt [+] Negative Status codes: 404 [+] User Agent: gobuster/3.1.0 [+] Timeout: 10s =============================================================== 2023/05/08 11:45:05 Starting gobuster in directory enumeration mode =============================================================== /.hta (Status: 403) [Size: 279] /.htaccess (Status: 403) [Size: 279] /.htpasswd (Status: 403) [Size: 279] /images (Status: 301) [Size: 317] [--\u003e http://10.129.165.111/images/] /index.php (Status: 200) [Size: 11952] /server-status (Status: 403) [Size: 279] =============================================================== 2023/05/08 11:45:10 Finished =============================================================== ┌─[htb-bluewalle@htb-vwn6wdartu]─[~/three] └──╼ $ Looks like nothing interesting here either.\n2\nTASK 2 Question: What is the domain of the email address provided in the \"Contact\" section of the website?\nOnce we look around a bit on the website, the answer becomes quite clear. Interestingly enough, using whatweb in a proper recon phase would also get us the answer.\n┌─[htb-bluewalle@htb-vwn6wdartu]─[~/three] └──╼ $whatweb $rhost http://10.129.165.111 [200 OK] Apache[2.4.29], Country[RESERVED][ZZ], Email[mail@thetoppers.htb], HTML5, HTTPServer[Ubuntu Linux][Apache/2.4.29 (Ubuntu)], IP[10.129.165.111], Script, Title[The Toppers] ┌─[htb-bluewalle@htb-vwn6wdartu]─[~/three] └──╼ $ thetoppers.htb\nTASK 3 Question: In the absence of a DNS server, which Linux file can we use to resolve hostnames to IP addresses in order to be able to access the websites that point to those hostnames?\nOn the pwnbox (parrot os, debian based, linux) it can be found at /etc/hosts. Let us check it out.\n┌─[htb-bluewalle@htb-vwn6wdartu]─[~/three] └──╼ $cat /etc/hosts # Your system has configured 'manage_etc_hosts' as True. # As a result, if you wish for changes to this file to persist # then you will need to either # a.) make changes to the master file in /etc/cloud/templates/hosts.debian.tmpl # b.) change or remove the value of 'manage_etc_hosts' in # /etc/cloud/cloud.cfg or cloud-config from user-data # 127.0.1.1 htb-vwn6wdartu.htb-cloud.com htb-vwn6wdartu 127.0.0.1 localhost # The following lines are desirable for IPv6 capable hosts ::1 localhost ip6-localhost ip6-loopback ff02::1 ip6-allnodes ff02::2 ip6-allrouters ┌─[htb-bluewalle@htb-vwn6wdartu]─[~/three] └──╼ $ Before we continue, we add the newly found host to ip mapping to our host file.\n┌─[htb-bluewalle@htb-lhposwyydw]─[~/three] └──╼ $echo -e \"# htb-starting-point-tier-1-three host ip mapping \\n$rhost thetoppers.htb\" | sudo tee -a /etc/hosts # htb-starting-point-tier-1-three host ip mapping 10.129.165.173 thetoppers.htb ┌─[htb-bluewalle@htb-lhposwyydw]─[~/three] └──╼ $ /etc/hosts\nTASK 4 Question: Which sub-domain is discovered during further enumeration?\nUsing gobuster's vhost mode can help us enumerating virtual hosts on our target.\n┌─[htb-bluewalle@htb-lhposwyydw]─[~/three] └──╼ $gobuster vhost --help Uses VHOST enumeration mode Usage: gobuster vhost [flags] Flags: -c, --cookies string Cookies to use for the requests -r, --follow-redirect Follow redirects -H, --headers stringArray Specify HTTP headers, -H 'Header1: val1' -H 'Header2: val2' -h, --help help for vhost -m, --method string Use the following HTTP method (default \"GET\") -k, --no-tls-validation Skip TLS certificate verification -P, --password string Password for Basic Auth --proxy string Proxy to use for requests [http(s)://host:port] --random-agent Use a random User-Agent string --timeout duration HTTP Timeout (default 10s) -u, --url string The target URL -a, --useragent string Set the User-Agent string (default \"gobuster/3.1.0\") -U, --username string Username for Basic Auth Global Flags: --delay duration Time each thread waits between requests (e.g. 1500ms) --no-error Don't display errors -z, --no-progress Don't display progress -o, --output string Output file to write results to (defaults to stdout) -p, --pattern string File containing replacement patterns -q, --quiet Don't print the banner and other noise -t, --threads int Number of concurrent threads (default 10) -v, --verbose Verbose output (errors) -w, --wordlist string Path to the wordlist ┌─[htb-bluewalle@htb-lhposwyydw]─[~/three] └──╼ $ Once we get familiar enough with it’s usage, we run it with one of the wordlists that come with seclists installed.\n┌─[htb-bluewalle@htb-lhposwyydw]─[~/three] └──╼ $gobuster vhost -u http://thetoppers.htb/ -w /opt/useful/SecLists/Discovery/DNS/subdomains-top1million-5000.txt =============================================================== Gobuster v3.1.0 by OJ Reeves (@TheColonial) \u0026 Christian Mehlmauer (@firefart) =============================================================== [+] Url: http://thetoppers.htb/ [+] Method: GET [+] Threads: 10 [+] Wordlist: /opt/useful/SecLists/Discovery/DNS/subdomains-top1million-5000.txt [+] User Agent: gobuster/3.1.0 [+] Timeout: 10s =============================================================== 2023/05/08 14:54:27 Starting gobuster in VHOST enumeration mode =============================================================== Found: s3.thetoppers.htb (Status: 404) [Size: 21] Found: gc._msdcs.thetoppers.htb (Status: 400) [Size: 306] =============================================================== 2023/05/08 14:54:33 Finished =============================================================== ┌─[htb-bluewalle@htb-lhposwyydw]─[~/three] └──╼ $ Great, we found not one, but two possible subdomains. Let us check it out with curl.\n┌─[htb-bluewalle@htb-lhposwyydw]─[~/three] └──╼ $curl s3.thetoppers.htb curl: (6) Could not resolve host: s3.thetoppers.htb ┌─[✗]─[htb-bluewalle@htb-lhposwyydw]─[~/three] └──╼ $ It looks like we have the same issue as before and we need to manually add the host to ip resolution to our system.\n┌─[✗]─[htb-bluewalle@htb-lhposwyydw]─[~/three] └──╼ $echo -e \"# htb-starting-point-tier-1-three subdomain host ip mapping\\n$rhost s3.thetoppers.htb\" | sudo tee -a /etc/hosts # htb-starting-point-tier-1-three subdomain host ip mapping 10.129.165.173 s3.thetoppers.htb ┌─[htb-bluewalle@htb-lhposwyydw]─[~/three] └──╼ $ Now that the host name resolution is fixed, we get an answer when we run the same command as before.\n┌─[htb-bluewalle@htb-lhposwyydw]─[~/three] └──╼ $curl s3.thetoppers.htb {\"status\": \"running\"}┌─[htb-bluewalle@htb-lhposwyydw]─[~/three] └──╼ $ s3.thetoppers.htb\nTASK 5 Question: Which service is running on the discovered sub-domain?\nLooking up - s3 subdomain {\"status\": \"running\"} service - online gives us a clear picture.\namazon s3\nTASK 6 Question: Which command line utility can be used to interact with the service running on the discovered sub-domain?\nA quick online search lands us aws but there is no available man page installed for it, so we try the usual help option.\nAWS() AWS() NAME aws - DESCRIPTION The AWS Command Line Interface is a unified tool to manage your AWS services. SYNOPSIS aws [options] [parameters] Use aws command help for information on a specific command. Use aws help topics to view a list of available help topics. The synopsis for each command shows its parameters and their usage. Optional parameters are shown in square brackets. OPTIONS ... awscli\nTASK 7 Question: Which command is used to set up the AWS CLI installation?\nUsing - aws configure help - gives us a better idea what the selected option is supposed to do.\nCONFIGURE() CONFIGURE() NAME configure - DESCRIPTION Configure AWS CLI options. If this command is run with no arguments, you will be prompted for configuration values such as your AWS Access Key Id and your AWS Secret Access Key. You can configure a named pro- file using the --profile argument. If your config file does not exist (the default location is ~/.aws/config), the AWS CLI will create it for you. To keep an existing value, hit enter when prompted for the value. When you are prompted for information, the current value will be dis- played in [brackets]. If the config item has no value, it be displayed as [None]. Note that the configure command only works with values from the config file. It does not use any configuration values from envi- ronment variables or the IAM role. Note: the values you provide for the AWS Access Key ID and the AWS Se- cret Access Key will be written to the shared credentials file (~/.aws/credentials). CONFIGURATION VARIABLES ... aws configure\nTASK 8 Question: What is the command used by the above utility to list all of the S3 buckets?\nSimilarly to the previous task, we use the built-in help option but this time on the s3 command like - aws s3 help -.\n... AVAILABLE COMMANDS o cp o ls o mb o mv o presign o rb o rm o sync o website ... And then on the s3 ls command - aws s3 ls help -.\nLS() LS() NAME ls - DESCRIPTION List S3 objects and common prefixes under a prefix or all S3 buckets. Note that the --output and --no-paginate arguments are ignored for this command. See 'aws help' for descriptions of global parameters. SYNOPSIS ls or NONE [--recursive] [--page-size ] [--human-readable] [--summarize] [--request-payer ] OPTIONS ... aws s3 ls\nTASK 9 Question: This server is configured to run files written in what web scripting language?\nUsing the Wappalyzer Firefox extension\nphp\nSUBMIT FLAG Question: Submit root flag\nflag\nCongratulations, we just successfully pwned the target machine. All we have left to do now is to terminate the target box (if not terminated automatically) before we continue with the next box!\n","wordCount":"1675","inLanguage":"en","datePublished":"2023-05-08T08:00:00Z","dateModified":"2023-05-08T08:00:00Z","author":{"@type":"Person","name":"bluewalle"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://bluewalle.github.io/posts/walkthroughs/htb/starting-point/tier_1/three/"},"publisher":{"@type":"Organization","name":"Ee-Vah?","logo":{"@type":"ImageObject","url":"https://bluewalle.github.io/main/img/favicon.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://bluewalle.github.io/ accesskey=h title="Just Keep Swimming (Alt + H)"><img src=https://bluewalle.github.io/apple-touch-icon.png alt aria-label=logo height=35>Just Keep Swimming</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://bluewalle.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://bluewalle.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://bluewalle.github.io/about title=about><span>about</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://bluewalle.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://bluewalle.github.io/posts/>Posts</a></div><h1 class=post-title>HTB - Three - Walkthrough<sup><span class=entry-isdraft>&nbsp;&nbsp;[draft]</span></sup></h1><div class=post-meta><span title='2023-05-08 08:00:00 +0000 +0000'>May, 2023</span>&nbsp;·&nbsp;8 min&nbsp;·&nbsp;1675 words&nbsp;·&nbsp;bluewalle</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#setup><strong>SETUP</strong></a></li><li><a href=#task-1><strong>TASK 1</strong></a></li><li><a href=#task-2><strong>TASK 2</strong></a></li><li><a href=#task-3><strong>TASK 3</strong></a></li><li><a href=#task-4><strong>TASK 4</strong></a></li><li><a href=#task-5><strong>TASK 5</strong></a></li><li><a href=#task-6><strong>TASK 6</strong></a></li><li><a href=#task-7><strong>TASK 7</strong></a></li><li><a href=#task-8><strong>TASK 8</strong></a></li><li><a href=#task-9><strong>TASK 9</strong></a></li><li><a href=#submit-flag><strong>SUBMIT FLAG</strong></a></li></ul></nav></div></details></div><div class=post-content><p>The aim of this walkthrough is to provide help with the <strong>Three</strong> machine on the <a href=https://hackthebox.com title="Hack The Box website">Hack The Box website</a>. Please <strong>note</strong> that no <strong>flags</strong> are directly provided here. Moreover, <strong>be aware</strong> that this is only <strong>one</strong> of the <strong>many</strong> ways to solve the challenges.</p><p>It belongs to a series of tutorials that aim to help out complete beginners with finishing the <a href=https://app.hackthebox.com/starting-point title="HTB Starting Point">Starting Point</a> <strong>TIER 1</strong> challenges.</p><h2 id=setup><strong>SETUP</strong><a hidden class=anchor aria-hidden=true href=#setup>#</a></h2><p>There are a couple of ways to <strong>connect</strong> to the <strong>target machine</strong>. The one we will be using <strong>throughout</strong> this <strong>walkthrough</strong> is via the provided <strong>pwnbox</strong>.</p><p>Once our <strong>connection</strong> is taken care of, we <strong>spawn</strong> the <strong>target</strong> <strong>machine</strong>.</p><p>Also, not required, but it is possible to set an <strong>environmental</strong> variable containing our <strong>target host&rsquo;s</strong> IP address. Once set, we can easily <strong>access</strong> it by prepending a <em>$</em> to our variable name.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>┌─<span class=o>[</span>htb-bluewalle@htb-pwdysfiide<span class=o>]</span>─<span class=o>[</span>~/Desktop<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ <span class=nv>$rhost</span><span class=o>=</span>&lt;target-hosts-ip&gt;
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>┌─<span class=o>[</span>htb-bluewalle@htb-pwdysfiide<span class=o>]</span>─<span class=o>[</span>~/Desktop<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ $ <span class=nb>echo</span> <span class=nv>$rhost</span> 
</span></span><span class=line><span class=cl>&lt;target-hosts-ip&gt;
</span></span><span class=line><span class=cl>┌─<span class=o>[</span>htb-bluewalle@htb-pwdysfiide<span class=o>]</span>─<span class=o>[</span>~/Desktop<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ $
</span></span></code></pre></div><p>We could use the <em><strong>unset</strong></em> command to remove it after we no longer need it.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>┌─<span class=o>[</span>✗<span class=o>]</span>─<span class=o>[</span>htb-bluewalle@htb-pwdysfiide<span class=o>]</span>─<span class=o>[</span>~/Desktop<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ <span class=nv>$unset</span> rhost 
</span></span><span class=line><span class=cl>┌─<span class=o>[</span>htb-bluewalle@htb-pwdysfiide<span class=o>]</span>─<span class=o>[</span>~/Desktop<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ $
</span></span></code></pre></div><h2 id=task-1><strong>TASK 1</strong><a hidden class=anchor aria-hidden=true href=#task-1>#</a></h2><p><strong>Question</strong>: <em>How many TCP ports are open?</em></p><p>We start our <strong>recon</strong> with a quick <strong>connection</strong> check by <em><strong>pinging</strong></em> the <strong>target</strong> four times.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>┌─<span class=o>[</span>htb-bluewalle@htb-vwn6wdartu<span class=o>]</span>─<span class=o>[</span>~/three<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ <span class=nv>$ping</span> <span class=nv>$rhost</span> -c <span class=m>4</span>
</span></span><span class=line><span class=cl>PING 10.129.165.111 <span class=o>(</span>10.129.165.111<span class=o>)</span> 56<span class=o>(</span>84<span class=o>)</span> bytes of data.
</span></span><span class=line><span class=cl><span class=m>64</span> bytes from 10.129.165.111: <span class=nv>icmp_seq</span><span class=o>=</span><span class=m>1</span> <span class=nv>ttl</span><span class=o>=</span><span class=m>63</span> <span class=nv>time</span><span class=o>=</span>10.8 ms
</span></span><span class=line><span class=cl><span class=m>64</span> bytes from 10.129.165.111: <span class=nv>icmp_seq</span><span class=o>=</span><span class=m>2</span> <span class=nv>ttl</span><span class=o>=</span><span class=m>63</span> <span class=nv>time</span><span class=o>=</span>10.7 ms
</span></span><span class=line><span class=cl><span class=m>64</span> bytes from 10.129.165.111: <span class=nv>icmp_seq</span><span class=o>=</span><span class=m>3</span> <span class=nv>ttl</span><span class=o>=</span><span class=m>63</span> <span class=nv>time</span><span class=o>=</span>10.8 ms
</span></span><span class=line><span class=cl><span class=m>64</span> bytes from 10.129.165.111: <span class=nv>icmp_seq</span><span class=o>=</span><span class=m>4</span> <span class=nv>ttl</span><span class=o>=</span><span class=m>63</span> <span class=nv>time</span><span class=o>=</span>11.0 ms
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>--- 10.129.165.111 ping statistics ---
</span></span><span class=line><span class=cl><span class=m>4</span> packets transmitted, <span class=m>4</span> received, 0% packet loss, <span class=nb>time</span> 3006ms
</span></span><span class=line><span class=cl>rtt min/avg/max/mdev <span class=o>=</span> 10.704/10.801/10.965/0.098 ms
</span></span><span class=line><span class=cl>┌─<span class=o>[</span>htb-bluewalle@htb-vwn6wdartu<span class=o>]</span>─<span class=o>[</span>~/three<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ $
</span></span></code></pre></div><p>Once we made sure that we have a <strong>stable</strong> <strong>connection</strong> we continue our <strong>recon</strong> phase with an <strong>all-ports</strong> <strong>tcp scan</strong>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>┌─<span class=o>[</span>htb-bluewalle@htb-vwn6wdartu<span class=o>]</span>─<span class=o>[</span>~/three<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ <span class=nv>$nmap</span> -p- --min-rate<span class=o>=</span><span class=m>5000</span> <span class=nv>$rhost</span> 
</span></span><span class=line><span class=cl>Starting Nmap 7.93 <span class=o>(</span> https://nmap.org <span class=o>)</span> at 2023-05-08 11:20 BST
</span></span><span class=line><span class=cl>Nmap scan report <span class=k>for</span> 10.129.165.111
</span></span><span class=line><span class=cl>Host is up <span class=o>(</span>2.7s latency<span class=o>)</span>.
</span></span><span class=line><span class=cl>Not shown: <span class=m>63938</span> filtered tcp ports <span class=o>(</span>no-response<span class=o>)</span>, <span class=m>1595</span> closed tcp ports <span class=o>(</span>conn-refused<span class=o>)</span>
</span></span><span class=line><span class=cl>PORT   STATE SERVICE
</span></span><span class=line><span class=cl>22/tcp open  ssh
</span></span><span class=line><span class=cl>80/tcp open  http
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Nmap <span class=k>done</span>: <span class=m>1</span> IP address <span class=o>(</span><span class=m>1</span> host up<span class=o>)</span> scanned in 353.83 seconds
</span></span><span class=line><span class=cl>┌─<span class=o>[</span>htb-bluewalle@htb-vwn6wdartu<span class=o>]</span>─<span class=o>[</span>~/three<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ $
</span></span></code></pre></div><p>It looks like we have a <strong>webpage</strong> to check out. It looks like a website belonging to a band. Nothing that jumps out right away so let us continue with <em><strong>dir busting</strong></em>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>┌─<span class=o>[</span>htb-bluewalle@htb-vwn6wdartu<span class=o>]</span>─<span class=o>[</span>~/three<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ <span class=nv>$gobuster</span> dir -u http://<span class=nv>$rhost</span>/ -w /usr/share/wordlists/dirb/common.txt 
</span></span><span class=line><span class=cl><span class=o>===============================================================</span>
</span></span><span class=line><span class=cl>Gobuster v3.1.0
</span></span><span class=line><span class=cl>by OJ Reeves <span class=o>(</span>@TheColonial<span class=o>)</span> <span class=p>&amp;</span> Christian Mehlmauer <span class=o>(</span>@firefart<span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>===============================================================</span>
</span></span><span class=line><span class=cl><span class=o>[</span>+<span class=o>]</span> Url:                     http://10.129.165.111/
</span></span><span class=line><span class=cl><span class=o>[</span>+<span class=o>]</span> Method:                  GET
</span></span><span class=line><span class=cl><span class=o>[</span>+<span class=o>]</span> Threads:                 <span class=m>10</span>
</span></span><span class=line><span class=cl><span class=o>[</span>+<span class=o>]</span> Wordlist:                /usr/share/wordlists/dirb/common.txt
</span></span><span class=line><span class=cl><span class=o>[</span>+<span class=o>]</span> Negative Status codes:   <span class=m>404</span>
</span></span><span class=line><span class=cl><span class=o>[</span>+<span class=o>]</span> User Agent:              gobuster/3.1.0
</span></span><span class=line><span class=cl><span class=o>[</span>+<span class=o>]</span> Timeout:                 <span class=nv>10s</span>
</span></span><span class=line><span class=cl><span class=o>===============================================================</span>
</span></span><span class=line><span class=cl>2023/05/08 11:45:05 Starting gobuster in directory enumeration <span class=nv>mode</span>
</span></span><span class=line><span class=cl><span class=o>===============================================================</span>
</span></span><span class=line><span class=cl>/.hta                 <span class=o>(</span>Status: 403<span class=o>)</span> <span class=o>[</span>Size: 279<span class=o>]</span>
</span></span><span class=line><span class=cl>/.htaccess            <span class=o>(</span>Status: 403<span class=o>)</span> <span class=o>[</span>Size: 279<span class=o>]</span>
</span></span><span class=line><span class=cl>/.htpasswd            <span class=o>(</span>Status: 403<span class=o>)</span> <span class=o>[</span>Size: 279<span class=o>]</span>
</span></span><span class=line><span class=cl>/images               <span class=o>(</span>Status: 301<span class=o>)</span> <span class=o>[</span>Size: 317<span class=o>]</span> <span class=o>[</span>--&gt; http://10.129.165.111/images/<span class=o>]</span>
</span></span><span class=line><span class=cl>/index.php            <span class=o>(</span>Status: 200<span class=o>)</span> <span class=o>[</span>Size: 11952<span class=o>]</span>                                  
</span></span><span class=line><span class=cl>/server-status        <span class=o>(</span>Status: 403<span class=o>)</span> <span class=o>[</span>Size: 279<span class=o>]</span>                                    
</span></span><span class=line><span class=cl>                                                                                   
</span></span><span class=line><span class=cl><span class=o>===============================================================</span>
</span></span><span class=line><span class=cl>2023/05/08 11:45:10 <span class=nv>Finished</span>
</span></span><span class=line><span class=cl><span class=o>===============================================================</span>
</span></span><span class=line><span class=cl>┌─<span class=o>[</span>htb-bluewalle@htb-vwn6wdartu<span class=o>]</span>─<span class=o>[</span>~/three<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ $
</span></span></code></pre></div><p>Looks like nothing interesting here either.</p><blockquote><p>2</p></blockquote><h2 id=task-2><strong>TASK 2</strong><a hidden class=anchor aria-hidden=true href=#task-2>#</a></h2><p><strong>Question</strong>: <em>What is the domain of the email address provided in the "Contact" section of the website?</em></p><p>Once we <strong>look around a bit</strong> on the website, the answer becomes quite clear. Interestingly enough, using <em><strong>whatweb</strong></em> in a proper <strong>recon</strong> phase would also get us the answer.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>┌─<span class=o>[</span>htb-bluewalle@htb-vwn6wdartu<span class=o>]</span>─<span class=o>[</span>~/three<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ <span class=nv>$whatweb</span> <span class=nv>$rhost</span>
</span></span><span class=line><span class=cl>http://10.129.165.111 <span class=o>[</span><span class=m>200</span> OK<span class=o>]</span> Apache<span class=o>[</span>2.4.29<span class=o>]</span>, Country<span class=o>[</span>RESERVED<span class=o>][</span>ZZ<span class=o>]</span>, Email<span class=o>[</span>mail@thetoppers.htb<span class=o>]</span>, HTML5, HTTPServer<span class=o>[</span>Ubuntu Linux<span class=o>][</span>Apache/2.4.29 <span class=o>(</span>Ubuntu<span class=o>)]</span>, IP<span class=o>[</span>10.129.165.111<span class=o>]</span>, Script, Title<span class=o>[</span>The Toppers<span class=o>]</span>
</span></span><span class=line><span class=cl>┌─<span class=o>[</span>htb-bluewalle@htb-vwn6wdartu<span class=o>]</span>─<span class=o>[</span>~/three<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ $
</span></span></code></pre></div><blockquote><p>thetoppers.htb</p></blockquote><h2 id=task-3><strong>TASK 3</strong><a hidden class=anchor aria-hidden=true href=#task-3>#</a></h2><p><strong>Question</strong>: <em>In the absence of a DNS server, which Linux file can we use to resolve hostnames to IP addresses in order to be able to access the websites that point to those hostnames?</em></p><p>On the <strong>pwnbox</strong> (parrot os, debian based, linux) it can be found at <em>/etc/hosts</em>. Let us check it out.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>┌─<span class=o>[</span>htb-bluewalle@htb-vwn6wdartu<span class=o>]</span>─<span class=o>[</span>~/three<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ <span class=nv>$cat</span> /etc/hosts
</span></span><span class=line><span class=cl><span class=c1># Your system has configured &#39;manage_etc_hosts&#39; as True.</span>
</span></span><span class=line><span class=cl><span class=c1># As a result, if you wish for changes to this file to persist</span>
</span></span><span class=line><span class=cl><span class=c1># then you will need to either</span>
</span></span><span class=line><span class=cl><span class=c1># a.) make changes to the master file in /etc/cloud/templates/hosts.debian.tmpl</span>
</span></span><span class=line><span class=cl><span class=c1># b.) change or remove the value of &#39;manage_etc_hosts&#39; in</span>
</span></span><span class=line><span class=cl><span class=c1>#     /etc/cloud/cloud.cfg or cloud-config from user-data</span>
</span></span><span class=line><span class=cl><span class=c1>#</span>
</span></span><span class=line><span class=cl>127.0.1.1 htb-vwn6wdartu.htb-cloud.com htb-vwn6wdartu
</span></span><span class=line><span class=cl>127.0.0.1 localhost
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=c1># The following lines are desirable for IPv6 capable hosts</span>
</span></span><span class=line><span class=cl>::1 localhost ip6-localhost ip6-loopback
</span></span><span class=line><span class=cl>ff02::1 ip6-allnodes
</span></span><span class=line><span class=cl>ff02::2 ip6-allrouters
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>┌─<span class=o>[</span>htb-bluewalle@htb-vwn6wdartu<span class=o>]</span>─<span class=o>[</span>~/three<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ $
</span></span></code></pre></div><p>Before we continue, we add the newly found <strong>host</strong> to <strong>ip</strong> mapping to our <strong>host file</strong>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>┌─<span class=o>[</span>htb-bluewalle@htb-lhposwyydw<span class=o>]</span>─<span class=o>[</span>~/three<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ <span class=nv>$echo</span> -e <span class=s2>&#34;# htb-starting-point-tier-1-three host ip mapping \n</span><span class=nv>$rhost</span><span class=s2> thetoppers.htb&#34;</span> <span class=p>|</span> sudo tee -a /etc/hosts
</span></span><span class=line><span class=cl><span class=c1># htb-starting-point-tier-1-three host ip mapping </span>
</span></span><span class=line><span class=cl>10.129.165.173 thetoppers.htb
</span></span><span class=line><span class=cl>┌─<span class=o>[</span>htb-bluewalle@htb-lhposwyydw<span class=o>]</span>─<span class=o>[</span>~/three<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ $
</span></span></code></pre></div><blockquote><p>/etc/hosts</p></blockquote><h2 id=task-4><strong>TASK 4</strong><a hidden class=anchor aria-hidden=true href=#task-4>#</a></h2><p><strong>Question</strong>: <em>Which sub-domain is discovered during further enumeration?</em></p><p>Using <em><strong>gobuster's vhost</strong></em> mode can help us <strong>enumerating virtual hosts</strong> on our <strong>target</strong>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>┌─<span class=o>[</span>htb-bluewalle@htb-lhposwyydw<span class=o>]</span>─<span class=o>[</span>~/three<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ <span class=nv>$gobuster</span> vhost --help
</span></span><span class=line><span class=cl>Uses VHOST enumeration mode
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Usage:
</span></span><span class=line><span class=cl>  gobuster vhost <span class=o>[</span>flags<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Flags:
</span></span><span class=line><span class=cl>  -c, --cookies string        Cookies to use <span class=k>for</span> the requests
</span></span><span class=line><span class=cl>  -r, --follow-redirect       Follow redirects
</span></span><span class=line><span class=cl>  -H, --headers stringArray   Specify HTTP headers, -H <span class=s1>&#39;Header1: val1&#39;</span> -H <span class=s1>&#39;Header2: val2&#39;</span>
</span></span><span class=line><span class=cl>  -h, --help                  <span class=nb>help</span> <span class=k>for</span> vhost
</span></span><span class=line><span class=cl>  -m, --method string         Use the following HTTP method <span class=o>(</span>default <span class=s2>&#34;GET&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  -k, --no-tls-validation     Skip TLS certificate verification
</span></span><span class=line><span class=cl>  -P, --password string       Password <span class=k>for</span> Basic Auth
</span></span><span class=line><span class=cl>      --proxy string          Proxy to use <span class=k>for</span> requests <span class=o>[</span>http<span class=o>(</span>s<span class=o>)</span>://host:port<span class=o>]</span>
</span></span><span class=line><span class=cl>      --random-agent          Use a random User-Agent string
</span></span><span class=line><span class=cl>      --timeout duration      HTTP Timeout <span class=o>(</span>default 10s<span class=o>)</span>
</span></span><span class=line><span class=cl>  -u, --url string            The target URL
</span></span><span class=line><span class=cl>  -a, --useragent string      Set the User-Agent string <span class=o>(</span>default <span class=s2>&#34;gobuster/3.1.0&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>  -U, --username string       Username <span class=k>for</span> Basic Auth
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Global Flags:
</span></span><span class=line><span class=cl>      --delay duration    Time each thread waits between requests <span class=o>(</span>e.g. 1500ms<span class=o>)</span>
</span></span><span class=line><span class=cl>      --no-error          Don<span class=s1>&#39;t display errors
</span></span></span><span class=line><span class=cl><span class=s1>  -z, --no-progress       Don&#39;</span>t display progress
</span></span><span class=line><span class=cl>  -o, --output string     Output file to write results to <span class=o>(</span>defaults to stdout<span class=o>)</span>
</span></span><span class=line><span class=cl>  -p, --pattern string    File containing replacement patterns
</span></span><span class=line><span class=cl>  -q, --quiet             Don<span class=err>&#39;</span>t print the banner and other noise
</span></span><span class=line><span class=cl>  -t, --threads int       Number of concurrent threads <span class=o>(</span>default 10<span class=o>)</span>
</span></span><span class=line><span class=cl>  -v, --verbose           Verbose output <span class=o>(</span>errors<span class=o>)</span>
</span></span><span class=line><span class=cl>  -w, --wordlist string   Path to the wordlist
</span></span><span class=line><span class=cl>┌─<span class=o>[</span>htb-bluewalle@htb-lhposwyydw<span class=o>]</span>─<span class=o>[</span>~/three<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ $
</span></span></code></pre></div><p>Once we get familiar enough with it&rsquo;s usage, we <strong>run it</strong> with one of the <strong>wordlists</strong> that come with <em><strong>seclists</strong></em> installed.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>┌─<span class=o>[</span>htb-bluewalle@htb-lhposwyydw<span class=o>]</span>─<span class=o>[</span>~/three<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ <span class=nv>$gobuster</span> vhost -u http://thetoppers.htb/ -w /opt/useful/SecLists/Discovery/DNS/subdomains-top1million-5000.txt 
</span></span><span class=line><span class=cl><span class=o>===============================================================</span>
</span></span><span class=line><span class=cl>Gobuster v3.1.0
</span></span><span class=line><span class=cl>by OJ Reeves <span class=o>(</span>@TheColonial<span class=o>)</span> <span class=p>&amp;</span> Christian Mehlmauer <span class=o>(</span>@firefart<span class=o>)</span>
</span></span><span class=line><span class=cl><span class=o>===============================================================</span>
</span></span><span class=line><span class=cl><span class=o>[</span>+<span class=o>]</span> Url:          http://thetoppers.htb/
</span></span><span class=line><span class=cl><span class=o>[</span>+<span class=o>]</span> Method:       GET
</span></span><span class=line><span class=cl><span class=o>[</span>+<span class=o>]</span> Threads:      <span class=m>10</span>
</span></span><span class=line><span class=cl><span class=o>[</span>+<span class=o>]</span> Wordlist:     /opt/useful/SecLists/Discovery/DNS/subdomains-top1million-5000.txt
</span></span><span class=line><span class=cl><span class=o>[</span>+<span class=o>]</span> User Agent:   gobuster/3.1.0
</span></span><span class=line><span class=cl><span class=o>[</span>+<span class=o>]</span> Timeout:      <span class=nv>10s</span>
</span></span><span class=line><span class=cl><span class=o>===============================================================</span>
</span></span><span class=line><span class=cl>2023/05/08 14:54:27 Starting gobuster in VHOST enumeration <span class=nv>mode</span>
</span></span><span class=line><span class=cl><span class=o>===============================================================</span>
</span></span><span class=line><span class=cl>Found: s3.thetoppers.htb <span class=o>(</span>Status: 404<span class=o>)</span> <span class=o>[</span>Size: 21<span class=o>]</span>
</span></span><span class=line><span class=cl>Found: gc._msdcs.thetoppers.htb <span class=o>(</span>Status: 400<span class=o>)</span> <span class=o>[</span>Size: 306<span class=o>]</span>
</span></span><span class=line><span class=cl>                                                         
</span></span><span class=line><span class=cl><span class=o>===============================================================</span>
</span></span><span class=line><span class=cl>2023/05/08 14:54:33 <span class=nv>Finished</span>
</span></span><span class=line><span class=cl><span class=o>===============================================================</span>
</span></span><span class=line><span class=cl>┌─<span class=o>[</span>htb-bluewalle@htb-lhposwyydw<span class=o>]</span>─<span class=o>[</span>~/three<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ $
</span></span></code></pre></div><p>Great, we <strong>found</strong> not one, but two possible <strong>subdomains</strong>. Let us check it out with <em><strong>curl</strong></em>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>┌─<span class=o>[</span>htb-bluewalle@htb-lhposwyydw<span class=o>]</span>─<span class=o>[</span>~/three<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ <span class=nv>$curl</span> s3.thetoppers.htb
</span></span><span class=line><span class=cl>curl: <span class=o>(</span>6<span class=o>)</span> Could not resolve host: s3.thetoppers.htb
</span></span><span class=line><span class=cl>┌─<span class=o>[</span>✗<span class=o>]</span>─<span class=o>[</span>htb-bluewalle@htb-lhposwyydw<span class=o>]</span>─<span class=o>[</span>~/three<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ $
</span></span></code></pre></div><p>It looks like we have the same <strong>issue</strong> as before and we need to <strong>manually</strong> add the <strong>host</strong> to <strong>ip</strong> <strong>resolution</strong> to our system.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>┌─<span class=o>[</span>✗<span class=o>]</span>─<span class=o>[</span>htb-bluewalle@htb-lhposwyydw<span class=o>]</span>─<span class=o>[</span>~/three<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ <span class=nv>$echo</span> -e <span class=s2>&#34;# htb-starting-point-tier-1-three subdomain host ip mapping\n</span><span class=nv>$rhost</span><span class=s2> s3.thetoppers.htb&#34;</span> <span class=p>|</span> sudo tee -a /etc/hosts
</span></span><span class=line><span class=cl><span class=c1># htb-starting-point-tier-1-three subdomain host ip mapping</span>
</span></span><span class=line><span class=cl>10.129.165.173 s3.thetoppers.htb
</span></span><span class=line><span class=cl>┌─<span class=o>[</span>htb-bluewalle@htb-lhposwyydw<span class=o>]</span>─<span class=o>[</span>~/three<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ $
</span></span></code></pre></div><p>Now that the <strong>host name resolution</strong> is <strong>fixed</strong>, we get an answer when we run the same command as before.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>┌─<span class=o>[</span>htb-bluewalle@htb-lhposwyydw<span class=o>]</span>─<span class=o>[</span>~/three<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ <span class=nv>$curl</span> s3.thetoppers.htb
</span></span><span class=line><span class=cl><span class=o>{</span><span class=s2>&#34;status&#34;</span>: <span class=s2>&#34;running&#34;</span><span class=o>}</span>┌─<span class=o>[</span>htb-bluewalle@htb-lhposwyydw<span class=o>]</span>─<span class=o>[</span>~/three<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ $
</span></span></code></pre></div><blockquote><p>s3.thetoppers.htb</p></blockquote><h2 id=task-5><strong>TASK 5</strong><a hidden class=anchor aria-hidden=true href=#task-5>#</a></h2><p><strong>Question</strong>: <em>Which service is running on the discovered sub-domain?</em></p><p><strong>Looking up</strong> - <em>s3 subdomain {"status": "running"} service</em> - <strong>online</strong> gives us a clear picture.</p><blockquote><p>amazon s3</p></blockquote><h2 id=task-6><strong>TASK 6</strong><a hidden class=anchor aria-hidden=true href=#task-6>#</a></h2><p><strong>Question</strong>: <em>Which command line utility can be used to interact with the service running on the discovered sub-domain?</em></p><p>A quick <strong>online search</strong> lands us <em><strong>aws</strong></em> but there is no available <strong>man page</strong> installed for it, so we try the usual <em><strong>help</strong></em> option.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>AWS<span class=o>()</span>                                                                    AWS<span class=o>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME
</span></span><span class=line><span class=cl>       aws -
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>DESCRIPTION
</span></span><span class=line><span class=cl>       The  AWS  Command  Line  Interface is a unified tool to manage your AWS
</span></span><span class=line><span class=cl>       services.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>SYNOPSIS
</span></span><span class=line><span class=cl>          aws <span class=o>[</span>options<span class=o>]</span> &lt;command&gt; &lt;subcommand&gt; <span class=o>[</span>parameters<span class=o>]</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>       Use aws <span class=nb>command</span> <span class=nb>help</span> <span class=k>for</span> information on a  specific  command.  Use  aws
</span></span><span class=line><span class=cl>       <span class=nb>help</span>  topics  to view a list of available <span class=nb>help</span> topics. The synopsis <span class=k>for</span>
</span></span><span class=line><span class=cl>       each <span class=nb>command</span> shows its parameters and their usage. Optional  parameters
</span></span><span class=line><span class=cl>       are shown in square brackets.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>OPTIONS
</span></span><span class=line><span class=cl>...
</span></span></code></pre></div><blockquote><p>awscli</p></blockquote><h2 id=task-7><strong>TASK 7</strong><a hidden class=anchor aria-hidden=true href=#task-7>#</a></h2><p><strong>Question</strong>: <em>Which command is used to set up the AWS CLI installation?</em></p><p>Using - <em>aws configure help</em> - gives us a better idea what the selected <strong>option</strong> is supposed to do.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>CONFIGURE<span class=o>()</span>                                                        CONFIGURE<span class=o>()</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME
</span></span><span class=line><span class=cl>       configure -
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>DESCRIPTION
</span></span><span class=line><span class=cl>       Configure  AWS  CLI  options. If this <span class=nb>command</span> is run with no arguments,
</span></span><span class=line><span class=cl>       you will be prompted <span class=k>for</span> configuration values such as your  AWS  Access
</span></span><span class=line><span class=cl>       Key  Id and your AWS Secret Access Key.  You can configure a named pro-
</span></span><span class=line><span class=cl>       file using the --profile argument.  If your config file does not  exist
</span></span><span class=line><span class=cl>       <span class=o>(</span>the default location is ~/.aws/config<span class=o>)</span>, the AWS CLI will create it <span class=k>for</span>
</span></span><span class=line><span class=cl>       you.  To keep an existing value, hit enter when prompted <span class=k>for</span> the value.
</span></span><span class=line><span class=cl>       When  you  are prompted <span class=k>for</span> information, the current value will be dis-
</span></span><span class=line><span class=cl>       played in <span class=o>[</span>brackets<span class=o>]</span>.  If the config item has no value, it be displayed
</span></span><span class=line><span class=cl>       as <span class=o>[</span>None<span class=o>]</span>.  Note that the configure <span class=nb>command</span> only works with values from
</span></span><span class=line><span class=cl>       the config file.  It does not use any configuration values  from  envi-
</span></span><span class=line><span class=cl>       ronment variables or the IAM role.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>       Note:  the values you provide <span class=k>for</span> the AWS Access Key ID and the AWS Se-
</span></span><span class=line><span class=cl>       cret Access  Key  will  be  written  to  the  shared  credentials  file
</span></span><span class=line><span class=cl>       <span class=o>(</span>~/.aws/credentials<span class=o>)</span>.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>CONFIGURATION VARIABLES
</span></span><span class=line><span class=cl>...
</span></span></code></pre></div><blockquote><p>aws configure</p></blockquote><h2 id=task-8><strong>TASK 8</strong><a hidden class=anchor aria-hidden=true href=#task-8>#</a></h2><p><strong>Question</strong>: <em>What is the command used by the above utility to list all of the S3 buckets?</em></p><p>Similarly to the previous task, we use the built-in <strong>help</strong> option but this time on the <strong>s3</strong> command like - <em><strong>aws s3 help</strong></em> -.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>...
</span></span><span class=line><span class=cl>AVAILABLE COMMANDS
</span></span><span class=line><span class=cl>       o cp
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>       o ls
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>       o mb
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>       o mv
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>       o presign
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>       o rb
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>       o rm
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>       o sync
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>       o website
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>...
</span></span></code></pre></div><p>And then on the <strong>s3</strong> <em><strong>ls</strong></em> command - <em>aws s3 ls help</em> -.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-text data-lang=text><span class=line><span class=cl>LS()                                                                      LS()
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>NAME
</span></span><span class=line><span class=cl>       ls -
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>DESCRIPTION
</span></span><span class=line><span class=cl>       List  S3  objects and common prefixes under a prefix or all S3 buckets.
</span></span><span class=line><span class=cl>       Note that the --output and --no-paginate arguments are ignored for this
</span></span><span class=line><span class=cl>       command.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>       See &#39;aws help&#39; for descriptions of global parameters.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>SYNOPSIS
</span></span><span class=line><span class=cl>            ls
</span></span><span class=line><span class=cl>          &lt;S3Uri&gt; or NONE
</span></span><span class=line><span class=cl>          [--recursive]
</span></span><span class=line><span class=cl>          [--page-size &lt;value&gt;]
</span></span><span class=line><span class=cl>          [--human-readable]
</span></span><span class=line><span class=cl>          [--summarize]
</span></span><span class=line><span class=cl>          [--request-payer &lt;value&gt;]
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>OPTIONS
</span></span><span class=line><span class=cl>...
</span></span></code></pre></div><blockquote><p>aws s3 ls</p></blockquote><h2 id=task-9><strong>TASK 9</strong><a hidden class=anchor aria-hidden=true href=#task-9>#</a></h2><p><strong>Question</strong>: <em>This server is configured to run files written in what web scripting language?</em></p><p>Using the <em><strong>Wappalyzer</strong></em> <strong>Firefox</strong> extension</p><blockquote><p>php</p></blockquote><h2 id=submit-flag><strong>SUBMIT FLAG</strong><a hidden class=anchor aria-hidden=true href=#submit-flag>#</a></h2><p><strong>Question</strong>: <em>Submit root flag</em></p><blockquote><p>flag</p></blockquote><p><strong>Congratulations</strong>, we just successfully <strong>pwned</strong> the <strong>target machine</strong>. All we have left to do now is to <strong>terminate</strong> the <strong>target</strong> box (if not terminated automatically) <strong>before</strong> we <strong>continue</strong> with the next box!</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://bluewalle.github.io/tags/htb/>htb</a></li><li><a href=https://bluewalle.github.io/tags/walkthrough/>walkthrough</a></li><li><a href=https://bluewalle.github.io/tags/three/>three</a></li><li><a href=https://bluewalle.github.io/tags/tier-1/>tier-1</a></li><li><a href=https://bluewalle.github.io/tags/web/>web</a></li><li><a href=https://bluewalle.github.io/tags/cloud/>cloud</a></li><li><a href=https://bluewalle.github.io/tags/custom-applications/>custom-applications</a></li><li><a href=https://bluewalle.github.io/tags/aws/>aws</a></li><li><a href=https://bluewalle.github.io/tags/reconnaissance/>reconnaissance</a></li><li><a href=https://bluewalle.github.io/tags/web-site-structure-discovery/>web-site-structure-discovery</a></li><li><a href=https://bluewalle.github.io/tags/bucket-enumeration/>bucket-enumeration</a></li><li><a href=https://bluewalle.github.io/tags/arbitrary-file-upload/>arbitrary-file-upload</a></li><li><a href=https://bluewalle.github.io/tags/anonymous-access/>anonymous-access</a></li><li><a href=https://bluewalle.github.io/tags/guest-access/>guest-access</a></li></ul></footer></article></main><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>