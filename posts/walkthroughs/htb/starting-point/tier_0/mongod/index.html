<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>HTB - Mongod - Walkthrough | Ee-Vah?</title><meta name=keywords content="htb,walkthrough,mongod,tier-0,mongodb,web,databases,reconnaissance,misconfiguration,anonymous-access,guest-access"><meta name=description content="The aim of this walkthrough is to provide help with the Mongod machine on the Hack The Box website. Please note that no flags are directly provided here, only one of the many ways to solve the challenges.
It belongs to a series of tutorials the aim to help out complete beginners with finishing the Starting Point challenges.
SETUP There are a couple of ways to connect to the target machine."><meta name=author content="bluewalle"><link rel=canonical href=https://bluewalle.github.io/posts/walkthroughs/htb/starting-point/tier_0/mongod/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.3613efbd0b1772781e8f49935e973cae632a7f61471c05b17be155505ccf87b5.css integrity="sha256-NhPvvQsXcngej0mTXpc8rmMqf2FHHAWxe+FVUFzPh7U=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://bluewalle.github.io/main/img/favicon.png><link rel=icon type=image/png sizes=16x16 href=https://bluewalle.github.io/main/img/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://bluewalle.github.io/main/img/favicon-32x32.png><link rel=apple-touch-icon href=https://bluewalle.github.io/main/img/apple-touch-icon.png><link rel=mask-icon href=https://bluewalle.github.io/%3Clink%20/%20abs%20url%3E><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,t,n,s,o,i,a){e.GoogleAnalyticsObject=o,e[o]=e[o]||function(){(e[o].q=e[o].q||[]).push(arguments)},e[o].l=1*new Date,i=t.createElement(n),a=t.getElementsByTagName(n)[0],i.async=1,i.src=s,a.parentNode.insertBefore(i,a)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="HTB - Mongod - Walkthrough"><meta property="og:description" content="The aim of this walkthrough is to provide help with the Mongod machine on the Hack The Box website. Please note that no flags are directly provided here, only one of the many ways to solve the challenges.
It belongs to a series of tutorials the aim to help out complete beginners with finishing the Starting Point challenges.
SETUP There are a couple of ways to connect to the target machine."><meta property="og:type" content="article"><meta property="og:url" content="https://bluewalle.github.io/posts/walkthroughs/htb/starting-point/tier_0/mongod/"><meta property="og:image" content="https://bluewalle.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="posts"><meta property="article:published_time" content="2023-05-04T20:00:00+00:00"><meta property="article:modified_time" content="2023-05-04T20:00:00+00:00"><meta property="og:site_name" content="Just Keep Swimming"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://bluewalle.github.io/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="HTB - Mongod - Walkthrough"><meta name=twitter:description content="The aim of this walkthrough is to provide help with the Mongod machine on the Hack The Box website. Please note that no flags are directly provided here, only one of the many ways to solve the challenges.
It belongs to a series of tutorials the aim to help out complete beginners with finishing the Starting Point challenges.
SETUP There are a couple of ways to connect to the target machine."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"https://bluewalle.github.io/posts/"},{"@type":"ListItem","position":2,"name":"HTB - Mongod - Walkthrough","item":"https://bluewalle.github.io/posts/walkthroughs/htb/starting-point/tier_0/mongod/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"HTB - Mongod - Walkthrough","name":"HTB - Mongod - Walkthrough","description":"The aim of this walkthrough is to provide help with the Mongod machine on the Hack The Box website. Please note that no flags are directly provided here, only one of the many ways to solve the challenges.\nIt belongs to a series of tutorials the aim to help out complete beginners with finishing the Starting Point challenges.\nSETUP There are a couple of ways to connect to the target machine.","keywords":["htb","walkthrough","mongod","tier-0","mongodb","web","databases","reconnaissance","misconfiguration","anonymous-access","guest-access"],"articleBody":"The aim of this walkthrough is to provide help with the Mongod machine on the Hack The Box website. Please note that no flags are directly provided here, only one of the many ways to solve the challenges.\nIt belongs to a series of tutorials the aim to help out complete beginners with finishing the Starting Point challenges.\nSETUP There are a couple of ways to connect to the target machine. The one I will be using throughout this walkthrough is via the provided Pwnbox.\nOnce you took care of your connection, make sure to spawn the target machine.\nAlso, not required, but it is possible to set an environmental variable containing your target hosts IP address. Once set, you can easily access it by prepending a $ to your variable name.\n┌─[htb-bluewalle@htb-pwdysfiide]─[~/Desktop] └──╼ $rhost= ┌─[htb-bluewalle@htb-pwdysfiide]─[~/Desktop] └──╼ $ echo $rhost ┌─[htb-bluewalle@htb-pwdysfiide]─[~/Desktop] └──╼ $ You could use the unset command to remove it after you no longer need it.\n┌─[✗]─[htb-bluewalle@htb-pwdysfiide]─[~/Desktop] └──╼ $unset rhost ┌─[htb-bluewalle@htb-pwdysfiide]─[~/Desktop] └──╼ $ TASK 1 Question: How many TCP ports are open on the machine?\nUse nmap to scan all the ports (tcp) on the target machine.\n┌─[htb-bluewalle@htb-fjpem3fvtz]─[~/Desktop] └──╼ $nmap -p- $rhost Starting Nmap 7.93 ( https://nmap.org ) at 2023-05-04 20:50 BST Nmap scan report for 10.129.228.30 Host is up (0.016s latency). Not shown: 65533 closed tcp ports (conn-refused) PORT STATE SERVICE 22/tcp open ssh 27017/tcp open mongod Nmap done: 1 IP address (1 host up) scanned in 276.32 seconds ┌─[htb-bluewalle@htb-fjpem3fvtz]─[~/Desktop] └──╼ $ 2\nTASK 2 Question: Which service is running on port 27017 of the remote host?\nRun nmap with the -sV options set.\n┌─[htb-bluewalle@htb-fjpem3fvtz]─[~/Desktop] └──╼ $nmap -sV -p 27017 $rhost Starting Nmap 7.93 ( https://nmap.org ) at 2023-05-04 20:57 BST Nmap scan report for 10.129.228.30 Host is up (0.019s latency). PORT STATE SERVICE VERSION 27017/tcp open mongodb MongoDB 3.6.8 Service detection performed. Please report any incorrect results at https://nmap.org/submit/ . Nmap done: 1 IP address (1 host up) scanned in 6.55 seconds ┌─[htb-bluewalle@htb-fjpem3fvtz]─[~/Desktop] └──╼ $ mongodb 3.6.8\nTASK 3 Question: What type of database is MongoDB? (Choose: SQL or NoSQL)\nHello wikipedia… :)\nnosql\nTASK 4 Question: What is the command name for the Mongo shell that is installed with the mongodb-clients package?\nWell, just like before, use the internet. To run it, use the mongosh command.\nmongo\nTASK 5 Question: What is the command used for listing all the databases present on the MongoDB server? (No need to include a trailing ;)\nFirst, let’s try and connect to the mongo database.Then, use help, to get a better idea of the available commands.\n┌─[htb-bluewalle@htb-fjpem3fvtz]─[~/Desktop] └──╼ $mongosh --host $rhost --port 27017 Current Mongosh Log ID:\t6454116baf46ee7fd101f1a3 Connecting to:\tmongodb://10.129.228.30:27017/?directConnection=true\u0026appName=mongosh+1.8.0 Using MongoDB:\t3.6.8 Using Mongosh:\t1.8.0 For mongosh info see: https://docs.mongodb.com/mongodb-shell/ To help improve our products, anonymous usage data is collected and sent to MongoDB periodically (https://www.mongodb.com/legal/privacy-policy). You can opt-out by running the disableTelemetry() command. ------ The server generated these startup warnings when booting 2023-05-04T19:47:17.293+0000: 2023-05-04T19:47:17.293+0000: ** WARNING: Using the XFS filesystem is strongly recommended with the WiredTiger storage engine 2023-05-04T19:47:17.293+0000: ** See http://dochub.mongodb.org/core/prodnotes-filesystem 2023-05-04T19:47:20.674+0000: 2023-05-04T19:47:20.674+0000: ** WARNING: Access control is not enabled for the database. 2023-05-04T19:47:20.674+0000: ** Read and write access to data and configuration is unrestricted. 2023-05-04T19:47:20.674+0000: ------ test\u003e help Shell Help: use Set current database show 'show databases'/'show dbs': Print a list of all available databases. 'show collections'/'show tables': Print a list of all collections for current database. 'show profile': Prints system.profile information. 'show users': Print a list of all users for current database. 'show roles': Print a list of all roles for current database. 'show log ': log for current connection, if type is not set uses 'global' 'show logs': Print all logs. exit Quit the MongoDB shell with exit/exit()/.exit quit Quit the MongoDB shell with quit/quit() Mongo Create a new connection and return the Mongo object. Usage: new Mongo(URI, options [optional]) connect Create a new connection and return the Database object. Usage: connect(URI, username [optional], password [optional]) it result of the last line evaluated; use to further iterate version Shell version load Loads and runs a JavaScript file into the current shell environment enableTelemetry Enables collection of anonymous usage data to improve the mongosh CLI disableTelemetry Disables collection of anonymous usage data to improve the mongosh CLI passwordPrompt Prompts the user for a password sleep Sleep for the specified number of milliseconds print Prints the contents of an object to the output printjson Alias for print() convertShardKeyToHashed Returns the hashed value for the input using the same hashing function as a hashed index. cls Clears the screen like console.clear() isInteractive Returns whether the shell will enter or has entered interactive mode For more information on usage: https://docs.mongodb.com/manual/reference/method test\u003e As we can see in the line, ‘show databases’/‘show dbs’: Print a list of all available databases, either show databases or show dbs should do the trick here. Let’s try it.\ntest\u003e show dbs admin 32.00 KiB config 72.00 KiB local 72.00 KiB sensitive_information 32.00 KiB users 32.00 KiB test\u003e show dbs\nTASK 6 Question: What is the command used for listing out the collections in a database? (No need to include a trailing ;)\nThere is a line in the previous output that was provided by the help command, that could help us out here. Namely, the ‘show collections’/‘show tables’: Print a list of all collections for current database line.\nTo list all the collections on the target system, use the use command to switch between the databases. The flag collection in the sensitive_information database looks especially interesting.\ntest\u003e use admin switched to db admin admin\u003e show collections system.version admin\u003e use config switched to db config config\u003e show collections system.sessions config\u003e use local switched to db local local\u003e show collections startup_log local\u003e use sensitive_information switched to db sensitive_information sensitive_information\u003e show collections flag sensitive_information\u003e use users switched to db users users\u003e show collections ecommerceWebapp users\u003e show collections\nTASK 7 Question: What is the command used for dumping the content of all the documents within the collection named flag in a format that is easy to read?\nThe internet is such a reliable helper… And we already know from the previous task, that the flag collection is in the sensitive_information database. Switch to it, to dump it’s content’s. Oo, great, we just solved the last task…\nusers\u003e use sensitive_information switched to db sensitive_information sensitive_information\u003e show collections flag sensitive_information\u003e db.flag.find().pretty() [ { _id: ObjectId(\"630e3dbcb82540ebbd1748c5\"), flag: '' } ] sensitive_information\u003e db.flag.find().pretty()\nSUBMIT FLAG Question: Submit root flag\nAlready solved above. :)\nflag\nMake sure to terminate the target box before you continue with the next machine!\n","wordCount":"1089","inLanguage":"en","datePublished":"2023-05-04T20:00:00Z","dateModified":"2023-05-04T20:00:00Z","author":{"@type":"Person","name":"bluewalle"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://bluewalle.github.io/posts/walkthroughs/htb/starting-point/tier_0/mongod/"},"publisher":{"@type":"Organization","name":"Ee-Vah?","logo":{"@type":"ImageObject","url":"https://bluewalle.github.io/main/img/favicon.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://bluewalle.github.io/ accesskey=h title="Just Keep Swimming (Alt + H)"><img src=https://bluewalle.github.io/apple-touch-icon.png alt aria-label=logo height=35>Just Keep Swimming</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://bluewalle.github.io/categories/ title=categories><span>categories</span></a></li><li><a href=https://bluewalle.github.io/tags/ title=tags><span>tags</span></a></li><li><a href=https://bluewalle.github.io/about title=about><span>about</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://bluewalle.github.io/>Home</a>&nbsp;»&nbsp;<a href=https://bluewalle.github.io/posts/>Posts</a></div><h1 class=post-title>HTB - Mongod - Walkthrough</h1><div class=post-meta><span title='2023-05-04 20:00:00 +0000 +0000'>May, 2023</span>&nbsp;·&nbsp;6 min&nbsp;·&nbsp;1089 words&nbsp;·&nbsp;bluewalle</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#setup><strong>SETUP</strong></a></li><li><a href=#task-1><strong>TASK 1</strong></a></li><li><a href=#task-2><strong>TASK 2</strong></a></li><li><a href=#task-3><strong>TASK 3</strong></a></li><li><a href=#task-4><strong>TASK 4</strong></a></li><li><a href=#task-5><strong>TASK 5</strong></a></li><li><a href=#task-6><strong>TASK 6</strong></a></li><li><a href=#task-7><strong>TASK 7</strong></a></li><li><a href=#submit-flag><strong>SUBMIT FLAG</strong></a></li></ul></nav></div></details></div><div class=post-content><p>The aim of this walkthrough is to provide help with the <strong>Mongod</strong> machine on the <a href=https://hackthebox.com title="Hack The Box website">Hack The Box website</a>. Please <strong>note</strong> that no <strong>flags</strong> are directly provided here, only <strong>one</strong> of the <strong>many</strong> ways to solve the challenges.</p><p>It belongs to a series of tutorials the aim to help out complete beginners with finishing the <a href=https://app.hackthebox.com/starting-point title="HTB Starting Point">Starting Point</a> challenges.</p><h2 id=setup><strong>SETUP</strong><a hidden class=anchor aria-hidden=true href=#setup>#</a></h2><p>There are a couple of ways to connect to the <strong>target machine</strong>. The one I will be using throughout this walkthrough is via the provided <strong>Pwnbox</strong>.</p><p>Once you took care of your connection, make sure to <strong>spawn</strong> the target machine.</p><p>Also, not required, but it is possible to set an <strong>environmental</strong> variable containing your <strong>target hosts</strong> IP address. Once set, you can easily <strong>access</strong> it by prepending a <em>$</em> to your variable name.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>┌─<span class=o>[</span>htb-bluewalle@htb-pwdysfiide<span class=o>]</span>─<span class=o>[</span>~/Desktop<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ <span class=nv>$rhost</span><span class=o>=</span>&lt;target-hosts-ip&gt;
</span></span></code></pre></div><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>┌─<span class=o>[</span>htb-bluewalle@htb-pwdysfiide<span class=o>]</span>─<span class=o>[</span>~/Desktop<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ $ <span class=nb>echo</span> <span class=nv>$rhost</span> 
</span></span><span class=line><span class=cl>&lt;target-hosts-ip&gt;
</span></span><span class=line><span class=cl>┌─<span class=o>[</span>htb-bluewalle@htb-pwdysfiide<span class=o>]</span>─<span class=o>[</span>~/Desktop<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ $
</span></span></code></pre></div><p>You could use the <em><strong>unset</strong></em> command to remove it after you no longer need it.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>┌─<span class=o>[</span>✗<span class=o>]</span>─<span class=o>[</span>htb-bluewalle@htb-pwdysfiide<span class=o>]</span>─<span class=o>[</span>~/Desktop<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ <span class=nv>$unset</span> rhost 
</span></span><span class=line><span class=cl>┌─<span class=o>[</span>htb-bluewalle@htb-pwdysfiide<span class=o>]</span>─<span class=o>[</span>~/Desktop<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ $
</span></span></code></pre></div><h2 id=task-1><strong>TASK 1</strong><a hidden class=anchor aria-hidden=true href=#task-1>#</a></h2><p><strong>Question</strong>: <em>How many TCP ports are open on the machine?</em></p><p>Use <em><strong>nmap</strong></em> to scan <strong>all the ports</strong> (tcp) <strong>on</strong> the <strong>target</strong> machine.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>┌─<span class=o>[</span>htb-bluewalle@htb-fjpem3fvtz<span class=o>]</span>─<span class=o>[</span>~/Desktop<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ <span class=nv>$nmap</span> -p- <span class=nv>$rhost</span> 
</span></span><span class=line><span class=cl>Starting Nmap 7.93 <span class=o>(</span> https://nmap.org <span class=o>)</span> at 2023-05-04 20:50 BST
</span></span><span class=line><span class=cl>Nmap scan report <span class=k>for</span> 10.129.228.30
</span></span><span class=line><span class=cl>Host is up <span class=o>(</span>0.016s latency<span class=o>)</span>.
</span></span><span class=line><span class=cl>Not shown: <span class=m>65533</span> closed tcp ports <span class=o>(</span>conn-refused<span class=o>)</span>
</span></span><span class=line><span class=cl>PORT      STATE SERVICE
</span></span><span class=line><span class=cl>22/tcp    open  ssh
</span></span><span class=line><span class=cl>27017/tcp open  mongod
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Nmap <span class=k>done</span>: <span class=m>1</span> IP address <span class=o>(</span><span class=m>1</span> host up<span class=o>)</span> scanned in 276.32 seconds
</span></span><span class=line><span class=cl>┌─<span class=o>[</span>htb-bluewalle@htb-fjpem3fvtz<span class=o>]</span>─<span class=o>[</span>~/Desktop<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ $
</span></span></code></pre></div><blockquote><p>2</p></blockquote><h2 id=task-2><strong>TASK 2</strong><a hidden class=anchor aria-hidden=true href=#task-2>#</a></h2><p><strong>Question</strong>: <em>Which service is running on port 27017 of the remote host?</em></p><p>Run <em><strong>nmap</strong></em> with the <em>-sV</em> options set.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>┌─<span class=o>[</span>htb-bluewalle@htb-fjpem3fvtz<span class=o>]</span>─<span class=o>[</span>~/Desktop<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ <span class=nv>$nmap</span> -sV -p <span class=m>27017</span> <span class=nv>$rhost</span> 
</span></span><span class=line><span class=cl>Starting Nmap 7.93 <span class=o>(</span> https://nmap.org <span class=o>)</span> at 2023-05-04 20:57 BST
</span></span><span class=line><span class=cl>Nmap scan report <span class=k>for</span> 10.129.228.30
</span></span><span class=line><span class=cl>Host is up <span class=o>(</span>0.019s latency<span class=o>)</span>.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>PORT      STATE SERVICE VERSION
</span></span><span class=line><span class=cl>27017/tcp open  mongodb MongoDB 3.6.8
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
</span></span><span class=line><span class=cl>Nmap <span class=k>done</span>: <span class=m>1</span> IP address <span class=o>(</span><span class=m>1</span> host up<span class=o>)</span> scanned in 6.55 seconds
</span></span><span class=line><span class=cl>┌─<span class=o>[</span>htb-bluewalle@htb-fjpem3fvtz<span class=o>]</span>─<span class=o>[</span>~/Desktop<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ $
</span></span></code></pre></div><blockquote><p>mongodb 3.6.8</p></blockquote><h2 id=task-3><strong>TASK 3</strong><a hidden class=anchor aria-hidden=true href=#task-3>#</a></h2><p><strong>Question</strong>: <em>What type of database is MongoDB? (Choose: SQL or NoSQL)</em></p><p>Hello wikipedia&mldr; :)</p><blockquote><p>nosql</p></blockquote><h2 id=task-4><strong>TASK 4</strong><a hidden class=anchor aria-hidden=true href=#task-4>#</a></h2><p><strong>Question</strong>: <em>What is the command name for the Mongo shell that is installed with the mongodb-clients package?</em></p><p>Well, just like before, <strong>use</strong> the <strong>internet</strong>. To run it, use the <em><strong>mongosh</strong></em> command.</p><blockquote><p>mongo</p></blockquote><h2 id=task-5><strong>TASK 5</strong><a hidden class=anchor aria-hidden=true href=#task-5>#</a></h2><p><strong>Question</strong>: <em>What is the command used for listing all the databases present on the MongoDB server? (No need to include a trailing ;)</em></p><p>First, let&rsquo;s try and connect to the <strong>mongo database</strong>.Then, use <em><strong>help</strong></em>, to get a better idea of the <strong>available</strong> commands.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>┌─<span class=o>[</span>htb-bluewalle@htb-fjpem3fvtz<span class=o>]</span>─<span class=o>[</span>~/Desktop<span class=o>]</span>
</span></span><span class=line><span class=cl>└──╼ <span class=nv>$mongosh</span> --host <span class=nv>$rhost</span> --port <span class=m>27017</span>
</span></span><span class=line><span class=cl>Current Mongosh Log ID:	6454116baf46ee7fd101f1a3
</span></span><span class=line><span class=cl>Connecting to:		mongodb://10.129.228.30:27017/?directConnection<span class=o>=</span>true<span class=p>&amp;</span><span class=nv>appName</span><span class=o>=</span>mongosh+1.8.0
</span></span><span class=line><span class=cl>Using MongoDB:		3.6.8
</span></span><span class=line><span class=cl>Using Mongosh:		1.8.0
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>For mongosh info see: https://docs.mongodb.com/mongodb-shell/
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>To <span class=nb>help</span> improve our products, anonymous usage data is collected and sent to MongoDB periodically <span class=o>(</span>https://www.mongodb.com/legal/privacy-policy<span class=o>)</span>.
</span></span><span class=line><span class=cl>You can opt-out by running the disableTelemetry<span class=o>()</span> command.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>------
</span></span><span class=line><span class=cl>   The server generated these startup warnings when booting
</span></span><span class=line><span class=cl>   2023-05-04T19:47:17.293+0000: 
</span></span><span class=line><span class=cl>   2023-05-04T19:47:17.293+0000: ** WARNING: Using the XFS filesystem is strongly recommended with the WiredTiger storage engine
</span></span><span class=line><span class=cl>   2023-05-04T19:47:17.293+0000: **          See http://dochub.mongodb.org/core/prodnotes-filesystem
</span></span><span class=line><span class=cl>   2023-05-04T19:47:20.674+0000: 
</span></span><span class=line><span class=cl>   2023-05-04T19:47:20.674+0000: ** WARNING: Access control is not enabled <span class=k>for</span> the database.
</span></span><span class=line><span class=cl>   2023-05-04T19:47:20.674+0000: **          Read and write access to data and configuration is unrestricted.
</span></span><span class=line><span class=cl>   2023-05-04T19:47:20.674+0000:
</span></span><span class=line><span class=cl>------
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>test&gt; <span class=nb>help</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  Shell Help:
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    use                                        Set current database
</span></span><span class=line><span class=cl>    show                                       <span class=s1>&#39;show databases&#39;</span>/<span class=s1>&#39;show dbs&#39;</span>: Print a list of all available databases.
</span></span><span class=line><span class=cl>                                               <span class=s1>&#39;show collections&#39;</span>/<span class=s1>&#39;show tables&#39;</span>: Print a list of all collections <span class=k>for</span> current database.
</span></span><span class=line><span class=cl>                                               <span class=s1>&#39;show profile&#39;</span>: Prints system.profile information.
</span></span><span class=line><span class=cl>                                               <span class=s1>&#39;show users&#39;</span>: Print a list of all users <span class=k>for</span> current database.
</span></span><span class=line><span class=cl>                                               <span class=s1>&#39;show roles&#39;</span>: Print a list of all roles <span class=k>for</span> current database.
</span></span><span class=line><span class=cl>                                               <span class=s1>&#39;show log &lt;type&gt;&#39;</span>: log <span class=k>for</span> current connection, <span class=k>if</span> <span class=nb>type</span> is not <span class=nb>set</span> uses <span class=s1>&#39;global&#39;</span>
</span></span><span class=line><span class=cl>                                               <span class=s1>&#39;show logs&#39;</span>: Print all logs.
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nb>exit</span>                                       Quit the MongoDB shell with exit/exit<span class=o>()</span>/.exit
</span></span><span class=line><span class=cl>    quit                                       Quit the MongoDB shell with quit/quit<span class=o>()</span>
</span></span><span class=line><span class=cl>    Mongo                                      Create a new connection and <span class=k>return</span> the Mongo object. Usage: new Mongo<span class=o>(</span>URI, options <span class=o>[</span>optional<span class=o>])</span>
</span></span><span class=line><span class=cl>    connect                                    Create a new connection and <span class=k>return</span> the Database object. Usage: connect<span class=o>(</span>URI, username <span class=o>[</span>optional<span class=o>]</span>, password <span class=o>[</span>optional<span class=o>])</span>
</span></span><span class=line><span class=cl>    it                                         result of the last line evaluated<span class=p>;</span> use to further iterate
</span></span><span class=line><span class=cl>    version                                    Shell version
</span></span><span class=line><span class=cl>    load                                       Loads and runs a JavaScript file into the current shell environment
</span></span><span class=line><span class=cl>    enableTelemetry                            Enables collection of anonymous usage data to improve the mongosh CLI
</span></span><span class=line><span class=cl>    disableTelemetry                           Disables collection of anonymous usage data to improve the mongosh CLI
</span></span><span class=line><span class=cl>    passwordPrompt                             Prompts the user <span class=k>for</span> a password
</span></span><span class=line><span class=cl>    sleep                                      Sleep <span class=k>for</span> the specified number of milliseconds
</span></span><span class=line><span class=cl>    print                                      Prints the contents of an object to the output
</span></span><span class=line><span class=cl>    printjson                                  Alias <span class=k>for</span> print<span class=o>()</span>
</span></span><span class=line><span class=cl>    convertShardKeyToHashed                    Returns the hashed value <span class=k>for</span> the input using the same hashing <span class=k>function</span> as a hashed index.
</span></span><span class=line><span class=cl>    cls                                        Clears the screen like console.clear<span class=o>()</span>
</span></span><span class=line><span class=cl>    isInteractive                              Returns whether the shell will enter or has entered interactive mode
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>  For more information on usage: https://docs.mongodb.com/manual/reference/method
</span></span><span class=line><span class=cl>test&gt; 
</span></span></code></pre></div><p>As we can see in the line, <em>&lsquo;show databases&rsquo;/&lsquo;show dbs&rsquo;: Print a list of all available databases</em>, either <em><strong>show databases</strong></em> or <em><strong>show dbs</strong></em> should do the trick here. Let&rsquo;s <strong>try it</strong>.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>test&gt; show dbs
</span></span><span class=line><span class=cl>admin                  32.00 KiB
</span></span><span class=line><span class=cl>config                 72.00 KiB
</span></span><span class=line><span class=cl><span class=nb>local</span>                  72.00 KiB
</span></span><span class=line><span class=cl>sensitive_information  32.00 KiB
</span></span><span class=line><span class=cl>users                  32.00 KiB
</span></span><span class=line><span class=cl>test&gt; 
</span></span></code></pre></div><blockquote><p>show dbs</p></blockquote><h2 id=task-6><strong>TASK 6</strong><a hidden class=anchor aria-hidden=true href=#task-6>#</a></h2><p><strong>Question</strong>: <em>What is the command used for listing out the collections in a database? (No need to include a trailing ;)</em></p><p>There is a line in the previous output that was provided by the <em><strong>help</strong></em> command, that could help us out here. Namely, the <em>&lsquo;show collections&rsquo;/&lsquo;show tables&rsquo;: Print a list of all collections for current database</em> line.</p><p>To list all the <strong>collections</strong> on the target system, use the <em><strong>use</strong></em> command to <strong>switch</strong> between the <strong>databases</strong>. The <em>flag</em> <strong>collection</strong> in the <em>sensitive_information</em> <strong>database</strong> looks especially interesting.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>test&gt; use admin
</span></span><span class=line><span class=cl>switched to db admin
</span></span><span class=line><span class=cl>admin&gt; show collections
</span></span><span class=line><span class=cl>system.version
</span></span><span class=line><span class=cl>admin&gt; use config
</span></span><span class=line><span class=cl>switched to db config
</span></span><span class=line><span class=cl>config&gt; show collections
</span></span><span class=line><span class=cl>system.sessions
</span></span><span class=line><span class=cl>config&gt; use <span class=nb>local</span>
</span></span><span class=line><span class=cl>switched to db <span class=nb>local</span>
</span></span><span class=line><span class=cl>local&gt; show collections
</span></span><span class=line><span class=cl>startup_log
</span></span><span class=line><span class=cl>local&gt; use sensitive_information
</span></span><span class=line><span class=cl>switched to db sensitive_information
</span></span><span class=line><span class=cl>sensitive_information&gt; show collections
</span></span><span class=line><span class=cl>flag
</span></span><span class=line><span class=cl>sensitive_information&gt; use users
</span></span><span class=line><span class=cl>switched to db users
</span></span><span class=line><span class=cl>users&gt; show collections
</span></span><span class=line><span class=cl>ecommerceWebapp
</span></span><span class=line><span class=cl>users&gt;
</span></span></code></pre></div><blockquote><p>show collections</p></blockquote><h2 id=task-7><strong>TASK 7</strong><a hidden class=anchor aria-hidden=true href=#task-7>#</a></h2><p><strong>Question</strong>: <em>What is the command used for dumping the content of all the documents within the collection named flag in a format that is easy to read?</em></p><p>The <strong>internet</strong> is such a reliable helper&mldr; And we already know from the previous task, that the <em>flag</em> <strong>collection</strong> is in the <em>sensitive_information</em> <strong>database</strong>. <strong>Switch</strong> to it, to <strong>dump</strong> it&rsquo;s content&rsquo;s. Oo, great, we just solved the last task&mldr;</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-bash data-lang=bash><span class=line><span class=cl>users&gt; use sensitive_information
</span></span><span class=line><span class=cl>switched to db sensitive_information
</span></span><span class=line><span class=cl>sensitive_information&gt; show collections
</span></span><span class=line><span class=cl>flag
</span></span><span class=line><span class=cl>sensitive_information&gt; db.flag.find<span class=o>()</span>.pretty<span class=o>()</span>
</span></span><span class=line><span class=cl><span class=o>[</span>
</span></span><span class=line><span class=cl>  <span class=o>{</span>
</span></span><span class=line><span class=cl>    _id: ObjectId<span class=o>(</span><span class=s2>&#34;630e3dbcb82540ebbd1748c5&#34;</span><span class=o>)</span>,
</span></span><span class=line><span class=cl>    flag: <span class=s1>&#39;&lt;flag&gt;&#39;</span>
</span></span><span class=line><span class=cl>  <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>]</span>
</span></span><span class=line><span class=cl>sensitive_information&gt; 
</span></span></code></pre></div><blockquote><p>db.flag.find().pretty()</p></blockquote><h2 id=submit-flag><strong>SUBMIT FLAG</strong><a hidden class=anchor aria-hidden=true href=#submit-flag>#</a></h2><p><strong>Question</strong>: <em>Submit root flag</em></p><p>Already <strong>solved</strong> <strong>above</strong>. :)</p><blockquote><p>flag</p></blockquote><p>Make sure to <strong>terminate</strong> the target box before you continue with the next machine!</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://bluewalle.github.io/tags/htb/>htb</a></li><li><a href=https://bluewalle.github.io/tags/walkthrough/>walkthrough</a></li><li><a href=https://bluewalle.github.io/tags/mongod/>mongod</a></li><li><a href=https://bluewalle.github.io/tags/tier-0/>tier-0</a></li><li><a href=https://bluewalle.github.io/tags/mongodb/>mongodb</a></li><li><a href=https://bluewalle.github.io/tags/web/>web</a></li><li><a href=https://bluewalle.github.io/tags/databases/>databases</a></li><li><a href=https://bluewalle.github.io/tags/reconnaissance/>reconnaissance</a></li><li><a href=https://bluewalle.github.io/tags/misconfiguration/>misconfiguration</a></li><li><a href=https://bluewalle.github.io/tags/anonymous-access/>anonymous-access</a></li><li><a href=https://bluewalle.github.io/tags/guest-access/>guest-access</a></li></ul></footer></article></main><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>